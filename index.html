<!DOCTYPE html>
<html>
<head>
  <title>SportGame</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: white;
    }

    .card {
      background: white;
      color: black;
      border-radius: 20px;
      width: 90%;
      max-width: 350px;
      overflow: hidden;
      text-align: left;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .card img {
      width: 100%;
      height: 300px;
      object-fit: cover;
    }

    .info {
      padding: 15px;
    }

    .buttons {
      display: flex;
      justify-content: space-around;
      padding: 15px;
    }

    .btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: none;
      font-size: 20px;
      cursor: pointer;
    }

    .no { background: #ff4d4d; color: white; }
    .yes { background: #00cc66; color: white; }

    .match {
      position: absolute;
      top: 20%;
      background: #00cc66;
      padding: 15px 25px;
      border-radius: 10px;
      display: none;
      font-weight: bold;
    }
  </style>
</head>

<body>

<div class="match" id="matchBox">Â¡MATCH! ðŸŽ‰</div>

<div class="card">
  <img id="photo" />
  <div class="info">
    <h2 id="name"></h2>
    <p id="sport"></p>
    <p id="distance"></p>
    <p id="rating"></p>
  </div>
  <div class="buttons">
    <button class="btn no" onclick="nextProfile()">âœ–</button>
    <button class="btn yes" onclick="likeProfile()">âœ”</button>
  </div>
</div>

<script>

let userLocation = null;

const profiles = [
  {
    name: "Carlos, 28",
    sport: "PÃ¡del - Intermedio",
    lat: 40.4168,
    lng: -3.7038,
    rating: "â­ 4.8 (15 partidos)",
    photo: "https://images.unsplash.com/photo-1599058917212-d750089bc07e"
  },
  {
    name: "LucÃ­a, 25",
    sport: "Running - Avanzado",
    lat: 40.4268,
    lng: -3.6938,
    rating: "â­ 4.6 (22 partidos)",
    photo: "https://images.unsplash.com/photo-1521412644187-c49fa049e84d"
  }
];

let index = 0;

function toRad(x) {
  return x * Math.PI / 180;
}

function getDistance(lat1, lon1, lat2, lon2) {
  const R = 6371;
  const dLat = toRad(lat2 - lat1);
  const dLon = toRad(lon2 - lon1);
  const a =
    Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
    Math.sin(dLon/2) * Math.sin(dLon/2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  return (R * c).toFixed(1);
}

function loadProfile() {
  const profile = profiles[index];
  document.getElementById("name").innerText = profile.name;
  document.getElementById("sport").innerText = profile.sport;
  document.getElementById("rating").innerText = profile.rating;
  document.getElementById("photo").src = profile.photo;

  if(userLocation){
    const distance = getDistance(
      userLocation.latitude,
      userLocation.longitude,
      profile.lat,
      profile.lng
    );
    document.getElementById("distance").innerText = "ðŸ“ A " + distance + " km";
  } else {
    document.getElementById("distance").innerText = "ðŸ“ Calculando...";
  }
}

function nextProfile() {
  index = (index + 1) % profiles.length;
  loadProfile();
}

function likeProfile() {
  document.getElementById("matchBox").style.display = "block";
  setTimeout(() => {
    document.getElementById("matchBox").style.display = "none";
    nextProfile();
  }, 1500);
}

if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(position => {
    userLocation = position.coords;
    loadProfile();
  });
} else {
  loadProfile();
}

</script>

</body>
</html>
